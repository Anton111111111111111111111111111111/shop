{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/render-function.js","../src/js/constants.js","../src/js/helpers.js","../src/js/products-api.js","../src/js/handlers.js","../src/home.js"],"sourcesContent":["export const refs = {\n  categoriesElem: document.querySelector('.categories'),\n  productsElem: document.querySelector('.products'),\n  categoryElem: document.querySelector('.categories__item'),\n  loadMoreElem: document.querySelector('.load-more-btn'),\n  searchBtnElem: document.querySelector('.search-form'),\n  wishElem: document.querySelector('.js-wish-btn'),\n  cartElem: document.querySelector('.js-cart-btn'),\n};\n","import { refs } from './refs';\n\nexport const createCategories = data =>\n  data\n    .map(\n      item => `<li class=\"categories__item\">\n   <button class=\"categories__btn\" type=\"button\">${item}</button>\n </li>`\n    )\n    .join('');\n\nexport const createProducts = data =>\n  data\n    .map(\n      item => `\n    <li class=\"products__item\" data-id=\"${item.id}\">\n    <img class=\"products__image\" src=\"${item.thumbnail}\" alt=\"${item.description}\"/>\n    <p class=\"products__title\">${item.title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand:${item.brand}</span></p>\n    <p class=\"products__category\">Category: ${item.category}</p>\n    <p class=\"products__price\">Price: ${item.price}$</p>\n </li>`\n    )\n    .join('');\n","export const BASE_URL = 'https://dummyjson.com/';\nexport const ENDPOINT = {\n  CATEGORIES: 'products/category-list',\n  PRODUCTS: `products?`,\n  CATEGORY: 'products/category/',\n};\nexport const LIMIT = 12;\n","import { refs } from './refs';\nimport { totalPages } from './products-api';\nimport { currentPage } from './handlers';\n\nexport let categoryName = 'All';\nexport const activeFirstBtn = () => {\n  const firstBtn = document.querySelector('.categories__btn');\n  if (firstBtn) {\n    firstBtn.classList.add('categories__btn--active');\n    categoryName = firstBtn.textContent;\n  }\n};\n\nexport const activeBtn = e => {\n  const targetBtn = e.target.closest('.categories__btn');\n  if (!targetBtn) return;\n\n  const previousActiveBtn = document.querySelector('.categories__btn--active');\n  if (previousActiveBtn) {\n    previousActiveBtn.classList.remove('categories__btn--active');\n  }\n  targetBtn.classList.add('categories__btn--active');\n  categoryName = targetBtn.textContent;\n  return;\n};\n\nexport const activateLoadMore = () => {\n  if (totalPages > currentPage) {\n    refs.loadMoreElem.classList.remove('is-hidden');\n  } else {\n    refs.loadMoreElem.classList.add('is-hidden');\n  }\n};\n","import axios from 'axios';\nimport { BASE_URL, ENDPOINT, LIMIT } from './constants';\nimport { categoryName, activateLoadMore } from './helpers';\nimport { refs } from './refs';\nimport { currentPage } from './handlers';\n\naxios.defaults.baseURL = BASE_URL;\n\nexport async function getCategories() {\n  try {\n    const response = await axios.get(`${ENDPOINT.CATEGORIES}`);\n    const data = response.data;\n    return data;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport let totalPages;\n\nexport async function getProductsByCategory() {\n  let params = new URLSearchParams({\n    limit: LIMIT,\n    skip: (currentPage - 1) * LIMIT,\n  });\n  try {\n    const response = await axios.get(`${ENDPOINT.CATEGORY}${categoryName}`, {\n      params,\n    });\n    const data = response.data;\n    totalPages = Math.ceil(data.total / LIMIT);\n    activateLoadMore();\n    return data.products;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function getProducts() {\n  let params = new URLSearchParams({\n    limit: LIMIT,\n    skip: (currentPage - 1) * LIMIT,\n  });\n  try {\n    const response = await axios.get(`${ENDPOINT.PRODUCTS}`, { params });\n    const data = response.data;\n    totalPages = Math.ceil(data.total / LIMIT);\n    activateLoadMore();\n    return data.products;\n  } catch (error) {\n    throw error;\n  }\n}\n","import { createCategories, createProducts } from './render-function';\nimport {\n  getCategories,\n  getProductsByCategory,\n  getProducts,\n} from './products-api';\nimport { activeFirstBtn, activeBtn, categoryName } from './helpers';\nimport { refs } from './refs';\n\nexport let currentPage = 1;\n\nexport const init = async () => {\n  const data = await getCategories();\n  const categoriesMarkup = createCategories(['All', ...data]);\n  refs.categoriesElem.innerHTML = categoriesMarkup;\n  activeFirstBtn();\n  const products = await getProducts();\n  const productsMarkup = createProducts(products);\n  refs.productsElem.innerHTML = productsMarkup;\n};\n\nrefs.categoriesElem.addEventListener('click', async e => {\n  activeBtn(e);\n  currentPage = 1;\n  try {\n    const products =\n      categoryName === 'All'\n        ? await getProducts()\n        : await getProductsByCategory();\n\n    refs.productsElem.innerHTML = createProducts(products);\n  } catch (error) {\n    throw error;\n  }\n});\n\nrefs.loadMoreElem.addEventListener('click', async e => {\n  currentPage += 1;\n  try {\n    let products;\n    if (categoryName && categoryName !== 'All') {\n      products = await getProductsByCategory();\n    } else {\n      products = await getProducts();\n    }\n    const productsMarkup = createProducts(products);\n    refs.productsElem.insertAdjacentHTML('beforeend', productsMarkup);\n  } catch (error) {\n    throw error;\n  }\n});\n","//Логіка сторінки Home\nimport { init } from './js/handlers';\n\ninit();\n"],"names":["refs","createCategories","data","item","createProducts","BASE_URL","ENDPOINT","LIMIT","categoryName","activeFirstBtn","firstBtn","activeBtn","targetBtn","previousActiveBtn","activateLoadMore","totalPages","currentPage","axios","getCategories","error","getProductsByCategory","params","getProducts","init","categoriesMarkup","products","productsMarkup"],"mappings":"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"}